<html>

<head>

<link rel="stylesheet" href="./AfterDiscuss.css">
	<link rel="stylesheet" href="./../../parse_mixidea/public/style/loading_spinner.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">


</head>
<body>


<div id="root_element"></div>	





<script type="text/template" data-template="after_discuss_related_link_template">

	<div id="related_link_container">
		<p class="after_discuss_title">related link </p>
		Let us investigate the information related to the motion and share each other
		<div>
			<ul data-bind="foreach:link_array">
				<li>

			    <div class="related_link_item">
			      <div class="link_image">
			        <img data-bind="attr:{src: img_src}">
			      </div>
			      <div class="related_link_text">
			        <p>
			        	<a data-bind="attr:{href: link_url}" target="_blank">
			        		<span class="link_title" data-bind="html:title"></span> 
			        	</a><br>
			        	<span class="link_description" data-bind="html:description"></span><br>
			        	<span class="link_site_name" data-bind="html:site_name"></span>
			        </p>
			      </div>
			    </div>

				</li>
			</ul>
		</div>
		<div id="link_input">
			<input type="text" class="link_input_style" placeholder="http://" data-bind="textInput: input_url, event:{keyup: onEnterLinkInput}" autofocus></input>
	  	<div data-bind="visible:visible_link_loading" class="link_loading" >
        <div  class="spinner">
          <div class="bounce1"></div>
          <div class="bounce2"></div>
          <div class="bounce3"></div>
          <div class="bounce4"></div>
          <div class="bounce5"></div>
        </div>
      </div>
		</div>

	</div>

</script>

<script type="text/template" data-template="after_discuss_arg_template">
	<div class="AfterDiscuss_container">
		<p class="after_discuss_title"><%= data.title %> </p>
		Think more argument and share each other
		<div>
			<ul data-bind="foreach:<%= data.content_array %>">
				<li>

			    <div class="after_dis_item">
			      <div class="user_field">
			        <img data-bind="attr:{src: user_img_src}">
			      	<span data-bind="text: user_name"></span>
			        <div data-bind="visible:visible_edit_button">
			        	<button class="btn btn-primary" data-bind="click:$parent.edit_content">edit</button>
			        </div>
			        <div data-bind="visible:visible_edit_context">
			        	<br>
			        	<button class="btn btn-success" data-bind="click:$parent.edit_conten_save">save</button><br><br>
			        	<button class="btn btn-inverse" data-bind="click:$parent.edit_conten_cancel">cancel</button><br>
			        </div>
			      </div>
			      <div class="after_dis_context">
			        <div data-bind="visible:visible_context_text">
			        	<div data-bind="text:context_text"></div>
			        </div>
			        <div data-bind="visible:visible_edit_context">
			        	<textarea class="after_discuss_opinion" data-bind="textInput: context_edit"></textarea>
			        </div>
			      </div>
			    </div>

				</li>
			</ul>
		</div>
		<div class="opinion_input_container">
       <textarea class="after_discuss_opinion" placeholder="Anyone can add additional argument regardless of your role " data-bind="textInput: <%= data.textarea %>"></textarea>
    </div>
    <div class="add_after_discuss_button_container">
    	<button class="btn btn-primary" data-bind="click: <%= data.button %>" >share</button>
    	<div data-bind="visible:<%= data.visible_loading %>" class="link_loading" >
        <div  class="spinner">
          <div class="bounce1"></div>
          <div class="bounce2"></div>
          <div class="bounce3"></div>
          <div class="bounce4"></div>
          <div class="bounce5"></div>
        </div>
    </div>
</script>






	<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
<script type="text/javascript" src="https://www.parsecdn.com/js/parse-1.4.2.min.js"></script>
<script src="./AfterDiscussParse.js"></script>


<script>

  var parse_app_id = "EWPPdrDVaAIqhRazWp8K0ZlmafAAPt93JiOAonvX";
  var parse_js_key = "US6Lheio8PGcBdIpwGFhFSQVpi5GKunGf6hGq5Ze";
  Parse.initialize(parse_app_id, parse_js_key);
	var actual_game_obj = new Object();
	var after_debate_obj = new AfterDebateTab();
	var global_debate_game_id = "h3blf1Zyb4";
	var global_own_parse_id = "I43dWXRBFN";

  var Game = Parse.Object.extend("Game");
  var game_query = new Parse.Query(Game);
  game_query.get(global_debate_game_id, {
    success: function(obj) {
      actual_game_obj = obj;
	    var after_debate_obj = new AfterDebateTabWrapper();
	    after_debate_obj.create("#root_element");
	    
//	    ko.applyBindings(after_debate_obj);
//	    after_debate_obj.show_all();
//			after_debate_obj.remove();

    },
    error: function(error) {

    }
  });
	

</script>




</body>
